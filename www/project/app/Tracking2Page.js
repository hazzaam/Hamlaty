/*
 * JS for Tracking2Page generated by Appery.io
 */

Apperyio.getProjectGUID = function() {
    return '3bab650c-a876-4c3f-9524-52c6000f9975';
};

function navigateTo(outcome, useAjax) {
    Apperyio.navigateTo(outcome, useAjax);
}

function adjustContentHeight() {
    Apperyio.adjustContentHeightWithPadding();
}

function adjustContentHeightWithPadding(_page) {
    Apperyio.adjustContentHeightWithPadding(_page);
}

function setDetailContent(pageUrl) {
    Apperyio.setDetailContent(pageUrl);
}

Apperyio.AppPages = [{
    "name": "FullMap",
    "location": "FullMap.html"
}, {
    "name": "Hajj1",
    "location": "Hajj1.html"
}, {
    "name": "Tracking2Page",
    "location": "Tracking2Page.html"
}, {
    "name": "StartPage",
    "location": "StartPage.html"
}, {
    "name": "FollowPage",
    "location": "FollowPage.html"
}, {
    "name": "TrackingPage",
    "location": "TrackingPage.html"
}, {
    "name": "Follow2Page",
    "location": "Follow2Page.html"
}];

function Tracking2Page_js() {

    /* Object & array with components "name-to-id" mapping */
    var n2id_buf = {
        'mobilebutton_168': 'Tracking2Page_mobilebutton_168',
        'mobilebutton_154': 'Tracking2Page_mobilebutton_154',
        'mobilegrid_257': 'Tracking2Page_mobilegrid_257',
        'mobilegridcell_258': 'Tracking2Page_mobilegridcell_258',
        'mobilegridcell_262': 'Tracking2Page_mobilegridcell_262',
        'mobilebutton_266': 'Tracking2Page_mobilebutton_266',
        'mobilegridcell_263': 'Tracking2Page_mobilegridcell_263',
        'mobileshow': 'Tracking2Page_mobileshow',
        'mobilegrid_169': 'Tracking2Page_mobilegrid_169',
        'mobilegridcell_170': 'Tracking2Page_mobilegridcell_170',
        'mobilegridcell_171': 'Tracking2Page_mobilegridcell_171',
        'tmsg': 'Tracking2Page_tmsg',
        'mobilegridcell_174': 'Tracking2Page_mobilegridcell_174',
        'errormsg': 'Tracking2Page_errormsg',
        'totaltrackgrid': 'Tracking2Page_totaltrackgrid',
        'mobilegridcell_156': 'Tracking2Page_mobilegridcell_156',
        'totaltrackgridx': 'Tracking2Page_totaltrackgridx',
        'TrackingGrid_60': 'Tracking2Page_TrackingGrid_60',
        'griddd_61': 'Tracking2Page_griddd_61',
        'mobilegrid_2_62': 'Tracking2Page_mobilegrid_2_62',
        'mobilegridcell_3_63': 'Tracking2Page_mobilegridcell_3_63',
        'currentspeed_64': 'Tracking2Page_currentspeed_64',
        'speed_label': 'Tracking2Page_speed_label',
        'mobilegridcell_4_65': 'Tracking2Page_mobilegridcell_4_65',
        'mobilelabel_11_66': 'Tracking2Page_mobilelabel_11_66',
        'mobilegridcell_5_67': 'Tracking2Page_mobilegridcell_5_67',
        'currentadd_125': 'Tracking2Page_currentadd_125',
        'mobilegridcell_6_122': 'Tracking2Page_mobilegridcell_6_122',
        'mobilelabel_13_127': 'Tracking2Page_mobilelabel_13_127',
        'mobilegridcell_7_124': 'Tracking2Page_mobilegridcell_7_124',
        'mobilegrid_18_129': 'Tracking2Page_mobilegrid_18_129',
        'mobilegridcell_19_130': 'Tracking2Page_mobilegridcell_19_130',
        'mobilelabel_25_131': 'Tracking2Page_mobilelabel_25_131',
        'mobilegridcell_20_132': 'Tracking2Page_mobilegridcell_20_132',
        'coorx_133': 'Tracking2Page_coorx_133',
        'mobilegridcell_21_134': 'Tracking2Page_mobilegridcell_21_134',
        'mobilelabel_26_135': 'Tracking2Page_mobilelabel_26_135',
        'mobilegridcell_22_136': 'Tracking2Page_mobilegridcell_22_136',
        'coory_137': 'Tracking2Page_coory_137',
        'mobilegridcell_8_126': 'Tracking2Page_mobilegridcell_8_126',
        'mobilelabel_14_139': 'Tracking2Page_mobilelabel_14_139',
        'mobilegridcell_288': 'Tracking2Page_mobilegridcell_288',
        'distanceDelta': 'Tracking2Page_distanceDelta',
        'mobilegridcell_289': 'Tracking2Page_mobilegridcell_289',
        'mobilelabel_290': 'Tracking2Page_mobilelabel_290',
        'mobilegrid_49_140': 'Tracking2Page_mobilegrid_49_140',
        'mobilegridcell_50_141': 'Tracking2Page_mobilegridcell_50_141',
        'mobilebutton_33_142': 'Tracking2Page_mobilebutton_33_142',
        'mobilegridcell_52_143': 'Tracking2Page_mobilegridcell_52_143',
        'mobilebutton_32_144': 'Tracking2Page_mobilebutton_32_144',
        'mobilegridcell_165': 'Tracking2Page_mobilegridcell_165',
        'mobilebutton_166': 'Tracking2Page_mobilebutton_166',
        'mobilegrid_41_149': 'Tracking2Page_mobilegrid_41_149',
        'mobilegridcell_42_150': 'Tracking2Page_mobilegridcell_42_150',
        'spacer_167': 'Tracking2Page_spacer_167',
        'sendText_152x': 'Tracking2Page_sendText_152x',
        'spacer_163': 'Tracking2Page_spacer_163',
        'mobilebutton_48_153': 'Tracking2Page_mobilebutton_48_153',
        'msgfb': 'Tracking2Page_msgfb',
        'spacer_164': 'Tracking2Page_spacer_164',
        'mobilegrid_267_276': 'Tracking2Page_mobilegrid_267_276',
        'mobilegridcell_268_277': 'Tracking2Page_mobilegridcell_268_277',
        'mobilegridcell_269_278': 'Tracking2Page_mobilegridcell_269_278',
        'mobilebutton_274_279': 'Tracking2Page_mobilebutton_274_279',
        'mobilegridcell_272_280': 'Tracking2Page_mobilegridcell_272_280',
        'mobilegrid_34_145': 'Tracking2Page_mobilegrid_34_145',
        'mobilegridcell_35_146': 'Tracking2Page_mobilegridcell_35_146',
        'gmap1': 'Tracking2Page_gmap1',
        'marker_40_148': 'Tracking2Page_marker_40_148',
        'spacer_162': 'Tracking2Page_spacer_162',
        'mobilegridcell_160': 'Tracking2Page_mobilegridcell_160',
        'spacer_176': 'Tracking2Page_spacer_176',
        'mobilelabel_256': 'Tracking2Page_mobilelabel_256',
        'nomsgs': 'Tracking2Page_nomsgs',
        'loopmsg_236': 'Tracking2Page_loopmsg_236',
        'mobilegridcell_228_237': 'Tracking2Page_mobilegridcell_228_237',
        'mobilecollapsblock_206_238': 'Tracking2Page_mobilecollapsblock_206_238',
        'mobilecollapsblockheader_207_239': 'Tracking2Page_mobilecollapsblockheader_207_239',
        'mobilegrid_209_240': 'Tracking2Page_mobilegrid_209_240',
        'mobilegridcell_210_241': 'Tracking2Page_mobilegridcell_210_241',
        'msgname_242': 'Tracking2Page_msgname_242',
        'mobilegridcell_212_243': 'Tracking2Page_mobilegridcell_212_243',
        'msgmobile_244': 'Tracking2Page_msgmobile_244',
        'msgtime2_245': 'Tracking2Page_msgtime2_245',
        'mobilecollapsblockcontent_208_246': 'Tracking2Page_mobilecollapsblockcontent_208_246',
        'mobilegrid_216_247': 'Tracking2Page_mobilegrid_216_247',
        'mobilegridcell_217_248': 'Tracking2Page_mobilegridcell_217_248',
        'msgtext_249': 'Tracking2Page_msgtext_249',
        'msgdate_251': 'Tracking2Page_msgdate_251',
        'msgtime_252': 'Tracking2Page_msgtime_252',
        'msgid': 'Tracking2Page_msgid',
        'mobilegrid_281': 'Tracking2Page_mobilegrid_281',
        'mobilegridcell_282': 'Tracking2Page_mobilegridcell_282',
        'mobilegridcell_283': 'Tracking2Page_mobilegridcell_283',
        'mobilebutton_287': 'Tracking2Page_mobilebutton_287',
        'mobilegridcell_286': 'Tracking2Page_mobilegridcell_286',
        'spacer_232_255': 'Tracking2Page_spacer_232_255'
    };

    if ("n2id" in window && window.n2id !== undefined) {
        $.extend(n2id, n2id_buf);
    } else {
        window.n2id = n2id_buf;
    }

    /*
     * Nonvisual components
     */

    Apperyio.mappings = Apperyio.mappings || {};

    Apperyio.mappings["Tracking2Page_geolocation2_onsuccess_mapping_0"] = {
        "homeScreen": "Tracking2Page",
        "directions": [

        {
            "from_name": "geolocation2",
            "from_type": "SERVICE_RESPONSE",

            "to_name": "gspeed",
            "to_type": "LOCAL_STORAGE",

            "mappings": [

            {

                "source": "$['data']['coords']['speed']",
                "target": "$"

            }

            ]
        },

        {
            "from_name": "geolocation2",
            "from_type": "SERVICE_RESPONSE",

            "to_name": "gheading",
            "to_type": "LOCAL_STORAGE",

            "mappings": [

            {

                "source": "$['data']['coords']['heading']",
                "target": "$"

            }

            ]
        },

        {
            "from_name": "geolocation2",
            "from_type": "SERVICE_RESPONSE",

            "to_name": "gtime",
            "to_type": "LOCAL_STORAGE",

            "mappings": [

            {

                "source": "$['data']['timestamp']",
                "target": "$"

            }

            ]
        },

        {
            "from_name": "tumobile",
            "from_type": "LOCAL_STORAGE",

            "to_name": "tumobile",
            "to_type": "LOCAL_STORAGE",

            "mappings": [

            {

                "source": "$",
                "target": "$"

            }

            ]
        },

        {
            "from_name": "tuname",
            "from_type": "LOCAL_STORAGE",

            "to_name": "tuname",
            "to_type": "LOCAL_STORAGE",

            "mappings": [

            {

                "source": "$",
                "target": "$"

            }

            ]
        },

        {
            "from_name": "tfmobile",
            "from_type": "LOCAL_STORAGE",

            "to_name": "tfmobile",
            "to_type": "LOCAL_STORAGE",

            "mappings": [

            {

                "source": "$",
                "target": "$"

            }

            ]
        },

        {
            "from_name": "geolocation2",
            "from_type": "SERVICE_RESPONSE",

            "to_name": "Tracking2Page",
            "to_type": "UI",

            "mappings": [

            {

                "source": "$['data']['coords']['latitude']",
                "target": "$['coory_137:text']"

            },

            {

                "source": "$['data']['coords']['longitude']",
                "target": "$['coorx_133:text']"

            }

            ]
        },

        {
            "from_name": "geolocation2",
            "from_type": "SERVICE_RESPONSE",

            "to_name": "glat",
            "to_type": "LOCAL_STORAGE",

            "mappings": [

            {

                "source": "$['data']['coords']['latitude']",
                "target": "$"

            }

            ]
        },

        {
            "from_name": "geolocation2",
            "from_type": "SERVICE_RESPONSE",

            "to_name": "glong",
            "to_type": "LOCAL_STORAGE",

            "mappings": [

            {

                "source": "$['data']['coords']['longitude']",
                "target": "$"

            }

            ]
        }

        ]
    };

    Apperyio.mappings["Tracking2Page_geolocation2_onbeforesend_mapping_0"] = {
        "homeScreen": "Tracking2Page",
        "directions": [

        {

            "to_name": "geolocation2",
            "to_type": "SERVICE_REQUEST",

            "to_default": {
                "data": {
                    "options": {
                        "maximumAge": 3000,
                        "timeout": 5000,
                        "enableHighAccuracy": true,
                        "watchPosition": false
                    }
                }
            },

            "mappings": []
        }

        ]
    };

    Apperyio.mappings["Tracking2Page_geocode1_onsuccess_mapping_0"] = {
        "homeScreen": "Tracking2Page",
        "directions": [

        {
            "from_name": "geocode1",
            "from_type": "SERVICE_RESPONSE",

            "to_name": "Tracking2Page",
            "to_type": "UI",

            "mappings": [

            {

                "source": "$['body']['results'][0]['formatted_address']",
                "target": "$['currentadd_125:text']"

            }

            ]
        }

        ]
    };

    Apperyio.mappings["Tracking2Page_geocode1_onbeforesend_mapping_0"] = {
        "homeScreen": "Tracking2Page",
        "directions": [

        {
            "from_name": "langg",
            "from_type": "LOCAL_STORAGE",

            "to_name": "geocode1",
            "to_type": "SERVICE_REQUEST",

            "to_default": {
                "headers": {},
                "parameters": {},
                "body": null
            },

            "mappings": [

            {

                "source": "$",
                "target": "$['parameters']['language']"

            }

            ]
        },

        {
            "from_name": "markerLatLngx",
            "from_type": "LOCAL_STORAGE",

            "to_name": "geocode1",
            "to_type": "SERVICE_REQUEST",

            "to_default": {
                "headers": {},
                "parameters": {},
                "body": null
            },

            "mappings": [

            {

                "source": "$",
                "target": "$['parameters']['latlng']"

            }

            ]
        }

        ]
    };

    Apperyio.mappings["Tracking2Page_upload_onsuccess_mapping_0"] = {
        "homeScreen": "Tracking2Page",
        "directions": []
    };

    Apperyio.mappings["Tracking2Page_upload_onbeforesend_mapping_0"] = {
        "homeScreen": "Tracking2Page",
        "directions": [

        {
            "from_name": "tumobile",
            "from_type": "LOCAL_STORAGE",

            "to_name": "upload",
            "to_type": "SERVICE_REQUEST",

            "to_default": {
                "headers": {},
                "parameters": {},
                "body": null
            },

            "mappings": [

            {

                "source": "$",
                "target": "$['parameters']['l_mobile']"

            }

            ]
        },

        {
            "from_name": "tuname",
            "from_type": "LOCAL_STORAGE",

            "to_name": "upload",
            "to_type": "SERVICE_REQUEST",

            "to_default": {
                "headers": {},
                "parameters": {},
                "body": null
            },

            "mappings": [

            {

                "source": "$",
                "target": "$['parameters']['fixed']"

            }

            ]
        },

        {
            "from_name": "tfmobile",
            "from_type": "LOCAL_STORAGE",

            "to_name": "upload",
            "to_type": "SERVICE_REQUEST",

            "to_default": {
                "headers": {},
                "parameters": {},
                "body": null
            },

            "mappings": [

            {

                "source": "$",
                "target": "$['parameters']['p_name']"

            }

            ]
        },

        {
            "from_name": "glat",
            "from_type": "LOCAL_STORAGE",

            "to_name": "upload",
            "to_type": "SERVICE_REQUEST",

            "to_default": {
                "headers": {},
                "parameters": {},
                "body": null
            },

            "mappings": [

            {

                "source": "$",
                "target": "$['parameters']['l_lat']"

            }

            ]
        },

        {
            "from_name": "glong",
            "from_type": "LOCAL_STORAGE",

            "to_name": "upload",
            "to_type": "SERVICE_REQUEST",

            "to_default": {
                "headers": {},
                "parameters": {},
                "body": null
            },

            "mappings": [

            {

                "source": "$",
                "target": "$['parameters']['l_long']"

            }

            ]
        },

        {
            "from_name": "gtime",
            "from_type": "LOCAL_STORAGE",

            "to_name": "upload",
            "to_type": "SERVICE_REQUEST",

            "to_default": {
                "headers": {},
                "parameters": {},
                "body": null
            },

            "mappings": [

            {

                "source": "$",
                "target": "$['parameters']['f_lat']"

            }

            ]
        },

        {
            "from_name": "currentdate",
            "from_type": "LOCAL_STORAGE",

            "to_name": "upload",
            "to_type": "SERVICE_REQUEST",

            "to_default": {
                "headers": {},
                "parameters": {},
                "body": null
            },

            "mappings": [

            {

                "source": "$",
                "target": "$['parameters']['leader']"

            }

            ]
        },

        {
            "from_name": "calspeed",
            "from_type": "LOCAL_STORAGE",

            "to_name": "upload",
            "to_type": "SERVICE_REQUEST",

            "to_default": {
                "headers": {},
                "parameters": {},
                "body": null
            },

            "mappings": [

            {

                "source": "$",
                "target": "$['parameters']['l_a']"

            }

            ]
        },

        {
            "from_name": "gheading",
            "from_type": "LOCAL_STORAGE",

            "to_name": "upload",
            "to_type": "SERVICE_REQUEST",

            "to_default": {
                "headers": {},
                "parameters": {},
                "body": null
            },

            "mappings": [

            {

                "source": "$",
                "target": "$['parameters']['f_mobile']"

            }

            ]
        },

        {
            "from_name": "Tracking2Page",
            "from_type": "UI",

            "to_name": "upload",
            "to_type": "SERVICE_REQUEST",

            "to_default": {
                "headers": {},
                "parameters": {},
                "body": null
            },

            "mappings": [

            {

                "source": "$['distanceDelta:text']",
                "target": "$['parameters']['f_long']"

            }

            ]
        }

        ]
    };

    Apperyio.mappings["Tracking2Page_msgs1_onbeforesend_mapping_0"] = {
        "homeScreen": "Tracking2Page",
        "directions": [

        {
            "from_name": "sendText_152",
            "from_type": "LOCAL_STORAGE",

            "to_name": "msgs1",
            "to_type": "SERVICE_REQUEST",

            "to_default": {
                "headers": {},
                "parameters": {},
                "body": null
            },

            "mappings": [

            {

                "source": "$",
                "target": "$['parameters']['msg']"

            }

            ]
        },

        {
            "from_name": "tumobile",
            "from_type": "LOCAL_STORAGE",

            "to_name": "msgs1",
            "to_type": "SERVICE_REQUEST",

            "to_default": {
                "headers": {},
                "parameters": {},
                "body": null
            },

            "mappings": [

            {

                "source": "$",
                "target": "$['parameters']['mobile_number']"

            }

            ]
        },

        {
            "from_name": "tuname",
            "from_type": "LOCAL_STORAGE",

            "to_name": "msgs1",
            "to_type": "SERVICE_REQUEST",

            "to_default": {
                "headers": {},
                "parameters": {},
                "body": null
            },

            "mappings": [

            {

                "source": "$",
                "target": "$['parameters']['username']"

            }

            ]
        },

        {
            "from_name": "tfmobile",
            "from_type": "LOCAL_STORAGE",

            "to_name": "msgs1",
            "to_type": "SERVICE_REQUEST",

            "to_default": {
                "headers": {},
                "parameters": {},
                "body": null
            },

            "mappings": [

            {

                "source": "$",
                "target": "$['parameters']['friend_Mobile']"

            }

            ]
        },

        {
            "from_name": "currentdate",
            "from_type": "LOCAL_STORAGE",

            "to_name": "msgs1",
            "to_type": "SERVICE_REQUEST",

            "to_default": {
                "headers": {},
                "parameters": {},
                "body": null
            },

            "mappings": [

            {

                "source": "$",
                "target": "$['parameters']['userdate']"

            }

            ]
        },

        {
            "from_name": "currenttime",
            "from_type": "LOCAL_STORAGE",

            "to_name": "msgs1",
            "to_type": "SERVICE_REQUEST",

            "to_default": {
                "headers": {},
                "parameters": {},
                "body": null
            },

            "mappings": [

            {

                "source": "$",
                "target": "$['parameters']['t24']"

            }

            ]
        }

        ]
    };

    Apperyio.mappings["Tracking2Page_countmsg_onsuccess_mapping_0"] = {
        "homeScreen": "Tracking2Page",
        "directions": [

        {
            "from_name": "countmsg",
            "from_type": "SERVICE_RESPONSE",

            "to_name": "Tracking2Page",
            "to_type": "UI",

            "mappings": [

            {

                "source": "$['body']['counts']",
                "target": "$['tmsg:text']"

            }

            ]
        }

        ]
    };

    Apperyio.mappings["Tracking2Page_countmsg_onbeforesend_mapping_0"] = {
        "homeScreen": "Tracking2Page",
        "directions": [

        {
            "from_name": "tumobile",
            "from_type": "LOCAL_STORAGE",

            "to_name": "countmsg",
            "to_type": "SERVICE_REQUEST",

            "to_default": {
                "headers": {},
                "parameters": {},
                "body": null
            },

            "mappings": [

            {

                "source": "$",
                "target": "$['parameters']['mobile_number']"

            }

            ]
        },

        {
            "from_name": "tfmobile",
            "from_type": "LOCAL_STORAGE",

            "to_name": "countmsg",
            "to_type": "SERVICE_REQUEST",

            "to_default": {
                "headers": {},
                "parameters": {},
                "body": null
            },

            "mappings": [

            {

                "source": "$",
                "target": "$['parameters']['friend_Mobile']"

            }

            ]
        }

        ]
    };

    Apperyio.mappings["Tracking2Page_list_msg_onsuccess_mapping_0"] = {
        "homeScreen": "Tracking2Page",
        "directions": [

        {
            "from_name": "list_msg",
            "from_type": "SERVICE_RESPONSE",

            "to_name": "Tracking2Page",
            "to_type": "UI",

            "mappings": [

            {

                "source": "$['body'][0]['status']",
                "target": "$['nomsgs:text']"

            },

            {

                "source": "$['body'][i]['t24']",
                "target": "$['loopmsg_236']['msgtime2_245:text']"

            },

            {

                "source": "$['body'][i]['username']",
                "target": "$['loopmsg_236']['msgname_242:text']"

            },

            {

                "source": "$['body'][i]['mobile_number']",
                "target": "$['loopmsg_236']['msgmobile_244:text']"

            },

            {

                "source": "$['body'][i]",
                "target": "$['loopmsg_236']"

            },

            {

                "source": "$['body'][i]['msg']",
                "target": "$['loopmsg_236']['msgtext_249:text']"

            },

            {

                "source": "$['body'][i]['userdate']",
                "target": "$['loopmsg_236']['msgdate_251:text']"

            },

            {

                "source": "$['body'][i]['t24']",
                "target": "$['loopmsg_236']['msgtime_252:text']"

            },

            {

                "source": "$['body'][i]['id']",
                "target": "$['loopmsg_236']['msgid:text']"

            }

            ]
        }

        ]
    };

    Apperyio.mappings["Tracking2Page_list_msg_onbeforesend_mapping_0"] = {
        "homeScreen": "Tracking2Page",
        "directions": [

        {
            "from_name": "tumobile",
            "from_type": "LOCAL_STORAGE",

            "to_name": "list_msg",
            "to_type": "SERVICE_REQUEST",

            "to_default": {
                "headers": {},
                "parameters": {},
                "body": null
            },

            "mappings": [

            {

                "source": "$",
                "target": "$['parameters']['mobile_number']"

            }

            ]
        },

        {
            "from_name": "tfmobile",
            "from_type": "LOCAL_STORAGE",

            "to_name": "list_msg",
            "to_type": "SERVICE_REQUEST",

            "to_default": {
                "headers": {},
                "parameters": {},
                "body": null
            },

            "mappings": [

            {

                "source": "$",
                "target": "$['parameters']['friend_Mobile']"

            }

            ]
        }

        ]
    };

    Apperyio.datasources = Apperyio.datasources || {};

    window.geolocation2 = Apperyio.datasources.geolocation2 = new Apperyio.DataSource(GeolocationService, {
        "onBeforeSend": function(jqXHR) {
            Apperyio.processMappingAction(Apperyio.mappings["Tracking2Page_geolocation2_onbeforesend_mapping_0"]);
        },
        "onComplete": function(jqXHR, textStatus) {

            initializex();

            ;
            Apperyio("errormsg").hide();

            countmsg.execute({});

        },
        "onSuccess": function(data) {
            Apperyio.processMappingAction(Apperyio.mappings["Tracking2Page_geolocation2_onsuccess_mapping_0"]);
            var newPoint = {
                lat: data.coords.latitude,
                lng: data.coords.longitude,
                time: (new Date().getTime())
            };
            var previousPoint = Helper.coordinates[Helper.coordinates.length - 1];

            if (Helper.coordinates.length) {
                var distanceDelta = Helper.getDistance(previousPoint, newPoint);

                var rounded = Math.round((distanceDelta * 60) * 100) / 100;
                //  Apperyio("speed_label").text("Current speed is "+rounded + " km/h");
                Apperyio("speed_label").text(rounded);
                //  Apperyio("distanceDelta").text(Math.round(distanceDelta/0.621371192));
                var ff = Number(Apperyio("distanceDelta").text());
                if (isNaN(ff)) {
                    ff = 0;
                }

                Apperyio("distanceDelta").text(((distanceDelta / 0.621371192) + ff).toFixed(3));
            }

            Helper.coordinates.push(newPoint);

            Helper.drowDirections();

            Helper.map.setCenter(newPoint);

            ;
        },
        "onError": function(jqXHR, textStatus, errorThrown) {
            Apperyio("errormsg").show();
        }
    });

    window.geocode1 = Apperyio.datasources.geocode1 = new Apperyio.DataSource(Geocode, {
        "onBeforeSend": function(jqXHR) {
            Apperyio.processMappingAction(Apperyio.mappings["Tracking2Page_geocode1_onbeforesend_mapping_0"]);
        },
        "onComplete": function(jqXHR, textStatus) {

        },
        "onSuccess": function(data) {
            Apperyio.processMappingAction(Apperyio.mappings["Tracking2Page_geocode1_onsuccess_mapping_0"]);
        },
        "onError": function(jqXHR, textStatus, errorThrown) {}
    });

    window.upload = Apperyio.datasources.upload = new Apperyio.DataSource(hajj_create_track_leader, {
        "onBeforeSend": function(jqXHR) {
            Apperyio.processMappingAction(Apperyio.mappings["Tracking2Page_upload_onbeforesend_mapping_0"]);
        },
        "onComplete": function(jqXHR, textStatus) {

        },
        "onSuccess": function(data) {
            Apperyio.processMappingAction(Apperyio.mappings["Tracking2Page_upload_onsuccess_mapping_0"]);
        },
        "onError": function(jqXHR, textStatus, errorThrown) {}
    });

    window.msgs1 = Apperyio.datasources.msgs1 = new Apperyio.DataSource(usermsg, {
        "onBeforeSend": function(jqXHR) {
            Apperyio.processMappingAction(Apperyio.mappings["Tracking2Page_msgs1_onbeforesend_mapping_0"]);
        },
        "onComplete": function(jqXHR, textStatus) {
            var zer = 'تم الإرسال بنجاح';

            Apperyio('msgfb').text(zer);

            setTimeout(function() {

                var zer = '';

                Apperyio('msgfb').text(zer);

            }, 4000);

        },
        "onSuccess": function(data) {},
        "onError": function(jqXHR, textStatus, errorThrown) {
            var zer = 'يوجد خطأ.. أعد المحاوله';

            Apperyio('msgfb').text(zer);

            setTimeout(function() {

                var zer = '';

                Apperyio('msgfb').text(zer);

            }, 4000);
        }
    });

    window.countmsg = Apperyio.datasources.countmsg = new Apperyio.DataSource(countmsgs, {
        "onBeforeSend": function(jqXHR) {
            Apperyio.processMappingAction(Apperyio.mappings["Tracking2Page_countmsg_onbeforesend_mapping_0"]);
        },
        "onComplete": function(jqXHR, textStatus) {

        },
        "onSuccess": function(data) {
            Apperyio.processMappingAction(Apperyio.mappings["Tracking2Page_countmsg_onsuccess_mapping_0"]);
        },
        "onError": function(jqXHR, textStatus, errorThrown) {}
    });

    window.list_msg = Apperyio.datasources.list_msg = new Apperyio.DataSource(list_msgs, {
        "onBeforeSend": function(jqXHR) {
            Apperyio.processMappingAction(Apperyio.mappings["Tracking2Page_list_msg_onbeforesend_mapping_0"]);
        },
        "onComplete": function(jqXHR, textStatus) {

        },
        "onSuccess": function(data) {
            Apperyio.processMappingAction(Apperyio.mappings["Tracking2Page_list_msg_onsuccess_mapping_0"]);
        },
        "onError": function(jqXHR, textStatus, errorThrown) {}
    });

    Apperyio.CurrentScreen = 'Tracking2Page';
    _.chain(Apperyio.mappings).filter(function(m) {
        return m.homeScreen === Apperyio.CurrentScreen;
    }).each(Apperyio.UIHandler.hideTemplateComponents);

    /*
     * Events and handlers
     */

    // On Load
    var Tracking2Page_onLoad = function() {
            Tracking2Page_elementsExtraJS();

            setInterval(function() {
                //cordova.plugins.backgroundMode.wakeUp();
                // upload.execute({});
                geolocation2.execute({});
                hideSpinner();

            }, 10000);

            Tracking2Page_deviceEvents();
            Tracking2Page_windowEvents();
            Tracking2Page_elementsEvents();
        };

    // screen window events


    function Tracking2Page_windowEvents() {

        $('#Tracking2Page').bind('pageshow orientationchange', function() {
            var _page = this;
            adjustContentHeightWithPadding(_page);
        });
        $('#Tracking2Page').on({
            pageshow: function(event) {
                try {
                    $a.storage["onetime"].update("$", "3")
                } catch (e) {
                    console.error(e)
                };
                Apperyio('mobilebutton_166').show();

                var tumobile = localStorage.getItem("tumobile");
                Apperyio('mobileshow').text(tumobile);

                //var myVar = setInterval(function() {
                //   initializex();

                var stopi = localStorage.getItem("stopi");

                if (stopi == 1) {
                    //   clearInterval(myVar);
                    setTimeout(function() {
                        Appery.navigateTo('StartPage');

                        // alert ("تم إيقاف السماح للآخرين من تتبعك");

                        function alertDismissed() {
                            // do something
                        }
                        navigator.notification.alert('تم إيقاف السماح للآخرين من تتبع', // message
                        alertDismissed, // callback
                        'تنبيه', // title
                        'OK' // buttonName
                        );

                    }, 100);

                    //       Apperyio('mtgrid').hide();

                } else {

                    //   geolocation2.execute({});
                    hideSpinner();

                    //     Apperyio('mtgrid').show();

                    //    var stopi = 0;
                    // localStorage.setItem("stopi", stopi);
                }

                //   }, 2000);

                ;
                Helper.initMap();;
                window.plugins.insomnia.keepAwake();

                // Android customization
                cordova.plugins.backgroundMode.setDefaults({
                    text: 'Doing heavy tasks.'
                });
                // Enable background mode
                cordova.plugins.backgroundMode.enable();

                // Called when background mode has been activated
                cordova.plugins.backgroundMode.onactivate = function() {
                    setTimeout(function() {
                        // Modify the currently displayed notification
                        cordova.plugins.backgroundMode.configure({
                            text: 'Running in background for more than 5s now.'
                        });
                    }, 5000);
                };

                //cordova.plugins.backgroundMode.enable();
            },
        });

    };

    // device events


    function Tracking2Page_deviceEvents() {
        document.addEventListener("deviceready", function() {

        });
    };

    // screen elements extra js


    function Tracking2Page_elementsExtraJS() {
        // screen (Tracking2Page) extra code

        /* gmap1 */

        $("[name = 'gmap1']").wrap("<div/>");
        $("[name = 'gmap1']").parent().css("margin-left", $("[name = 'gmap1']").css("margin-left"));
        $("[name = 'gmap1']").parent().css("margin-right", $("[name = 'gmap1']").css("margin-right"));
        $("[name = 'gmap1']").css("margin-left", '0');
        $("[name = 'gmap1']").css("margin-right", '0');

        var gmap1_options = {
            markerSourceName: "gmap1_markers",
            latitude: "",
            longitude: "",
            address: "Saudi Arabia",
            zoom: 6,
            showLocationMarker: false
        }

        Apperyio.__registerComponent('gmap1', new Apperyio.ApperyMapComponent("gmap1", gmap1_options));
        $("[name='gmap1_markers'] [apperytype='marker']").attr("reRender", "gmap1");

        function __update_gmap1(event, ui) {
            if (($('#Tracking2Page_gmap1', ui.toPage).length > 0) && (Apperyio('gmap1') != undefined) && (Apperyio('gmap1').isInitialized)) {
                Apperyio('gmap1').refresh();
            }
        }
        $(":mobile-pagecontainer").off("pagecontainershow.Tracking2Page_mobilecontainer", __update_gmap1).on("pagecontainershow.Tracking2Page_mobilecontainer", __update_gmap1);

        /* mobilecollapsblock_206_238 */

        $("#Tracking2Page_mobilecollapsblock_206_238 .ui-collapsible-heading-toggle").attr("tabindex", "12");

    };

    // screen elements handler


    function Tracking2Page_elementsEvents() {
        $(document).on("click", "a :input,a a,a fieldset label", function(event) {
            event.stopPropagation();
        });

        $(document).off("click", '#Tracking2Page_mobileheader [name="mobilebutton_168"]').on({
            click: function(event) {
                if (!$(this).attr('disabled')) {
                    Apperyio.navigateTo('TrackingPage', {
                        reverse: false
                    });

                }
            },
        }, '#Tracking2Page_mobileheader [name="mobilebutton_168"]');
        $(document).off("click", '#Tracking2Page_mobileheader [name="mobilebutton_154"]').on({
            click: function(event) {
                if (!$(this).attr('disabled')) {
                    window.plugins.insomnia.allowSleepAgain();
                    Appery.navigateTo('StartPage');

                }
            },
        }, '#Tracking2Page_mobileheader [name="mobilebutton_154"]');

        $(document).off("click", '#Tracking2Page_mobilecontainer [name="mobilebutton_266"]').on({
            click: function(event) {
                if (!$(this).attr('disabled')) {
                    //    var stopi = 0;
                    //localStorage.setItem("stopi", stopi);
                    //var str=window.location.href;
                    //var res = str.replace("StartPage.html", "Tracking2Page.html");
                    //alert(res);
                    //res=res;
                    //window.location.href=res;
                    //window.location.href=window.location.href;
                    //window.location.reload(res);
                    //Appery.navigateTo('Tracking2Page');
                    window.location.reload();

                    //geolocation2.execute({});
                }
            },
        }, '#Tracking2Page_mobilecontainer [name="mobilebutton_266"]');

        $(document).off("click", '#Tracking2Page_mobilecontainer [name="tmsg"]').on({
            click: function(event) {
                if (!$(this).attr('disabled')) {
                    $('[id="Tracking2Page_panel_175"]').panel("open");

                }
            },
        }, '#Tracking2Page_mobilecontainer [name="tmsg"]');

        $(document).off("click", '#Tracking2Page_mobilecontainer [name="mobilebutton_32_144"]').on({
            click: function(event) {
                if (!$(this).attr('disabled')) { // clearInterval(myVar);

                    var stopi = 1;
                    localStorage.setItem("stopi", stopi);

                    Apperyio('mobilebutton_166').hide();

                    window.location.reload();

                }
            },
        }, '#Tracking2Page_mobilecontainer [name="mobilebutton_32_144"]');

        $(document).off("click", '#Tracking2Page_mobilecontainer [name="mobilebutton_166"]').on({
            click: function(event) {
                if (!$(this).attr('disabled')) {
                    Apperyio('mobilegrid_41_149').show();

                }
            },
        }, '#Tracking2Page_mobilecontainer [name="mobilebutton_166"]');

        $(document).off("click", '#Tracking2Page_mobilecontainer [name="mobilebutton_48_153"]').on({
            click: function(event) {
                if (!$(this).attr('disabled')) {
                    var sendText_152 = $('input[name=sendText_152x]').val();
                    localStorage.setItem("sendText_152", sendText_152);
                    msgs1.execute({});;
                    var cx = '';
                    $('input[name=sendText_152x]').val(cx);

                    Apperyio('mobilegrid_41_149').hide();

                }
            },
        }, '#Tracking2Page_mobilecontainer [name="mobilebutton_48_153"]');

        $(document).off("click", '#Tracking2Page_mobilecontainer [name="mobilebutton_274_279"]').on({
            click: function(event) {
                if (!$(this).attr('disabled')) {
                    var mapx = Apperyio("gmap1").gmap;

                    var heading = localStorage.getItem("gheading");

                    //alert(heading);
                    mapx.setHeading(heading);

                    var markerLatLng = new google.maps.LatLng(localStorage.getItem("glat"), localStorage.getItem("glong"));

                    mapx.setCenter(markerLatLng);

                    ;

                }
            },
        }, '#Tracking2Page_mobilecontainer [name="mobilebutton_274_279"]');

        $('#Tracking2Page_panel_175').off("panelopen").on("panelopen", function(event) {
            try {
                list_msg.execute({});
            } catch (e) {
                console.error(e);
                hideSpinner();
            };
        });

        $(document).off("click", '#Tracking2Page_panel_175 [name="mobilebutton_287"]').on({
            click: function(event) {
                if (!$(this).attr('disabled')) {
                    try {
                        $a.storage["msgid"].update("$", $a.c15r($a.UIHandler.resolveGeneratedComponent('msgid', this), 'get', 'text'))
                    } catch (e) {
                        console.error(e)
                    };

                    var num = localStorage.getItem("msgid");

                    window.open('tel:' + Appery('msgmobile_244_' + num + '').text(), '_system');

                }
            },
        }, '#Tracking2Page_panel_175 [name="mobilebutton_287"]');

    };

    $(document).off("pagebeforeshow", "#Tracking2Page").on("pagebeforeshow", "#Tracking2Page", function(event, ui) {
        Apperyio.CurrentScreen = "Tracking2Page";
        _.chain(Apperyio.mappings).filter(function(m) {
            return m.homeScreen === Apperyio.CurrentScreen;
        }).each(Apperyio.UIHandler.hideTemplateComponents);
    });

    Tracking2Page_onLoad();
};

$(document).off("pagecreate", "#Tracking2Page").on("pagecreate", "#Tracking2Page", function(event, ui) {
    Apperyio.processSelectMenu($(this));
    Tracking2Page_js();
});